{% extends "base.html" %}
{% block title %}Dataset Details{% endblock %}
{% block breadcrumbs_items %}
    <ul>
        <li><a href="{% url 'datasets' %}">Datasets</a></li>
        <li>&nbsp;&gt;&nbsp;</li>
        <li>Dataset</li>
    </ul>
{% endblock %}
{% block content %}
    <div class="container">
        <div class="well col col-md-12">
            <h3>Dataset: {{ dataset.group|force_escape }}</h3>
            <div class="fixed-action-btn">
                <a class="btn-floating btn-large green" title="Edit dataset"
                   href="{% url 'dataset_update' dataset.id %}">
                    <i class="material-icons">edit</i>
                </a>
                <a class="btn-floating btn-large red" title="Delete dataset"
                   href="{% url 'dataset_delete' dataset.id %}">
                    <i class="material-icons">delete</i>
                </a>

            </div>
        </div>

        <div id="panel-group" class="accordion">

            <div class="panel panel-default">
                <div class="panel-heading">
                    <h3 class="panel-title">
                        <a data-toggle="collapse" href="#collapse2">Files</a>
                        <div class="fixed-action-btn">
                            <a class="btn-floating blue-grey" title="Add dataset file"
                               href="{% url 'dataset_files_create' dataset.id %}">
                                <i class="material-icons">add</i>
                            </a>
                        </div>
                    </h3>

                </div>
                <div id="collapse2" class="collapse" data-parent="#panel-group">
                    <div class="panel-body">
                        <table class="table table-hover">
                            <thead>
                            <tr>
                                <th>Type</th>
                                <th>Record Type</th>
                                <th>Location</th>
                                <th>Actions</th>
                            </tr>
                            </thead>
                            <tbody>
                            {% for file in dataset.dataset_files.all %}
                                <tr>
                                    <td>{{ file.type }}</td>
                                    <td>{{ file.filetype }}</td>
                                    <td>{{ file.location }}</td>
                                    <td><a class="btn-floating green" title="Edit dataset file"
                                           href="{% url 'dataset_files_update' file.id %}">
                                        <i class="material-icons">edit</i>
                                    </a></td>
                                </tr>
                            {% endfor %}
                            </tbody>
                        </table>
                    </div>
                    <div class="panel-footer"></div>
                </div>
            </div>
            <div class="panel panel-default">
                <div class="panel-heading">
                    <h3 class="panel-title">
                        <a data-toggle="collapse" href="#collapse3">Participants</a>
                        <div class="fixed-action-btn">
                            <a class="btn-floating blue-grey" title="Add dataset participant"
                               href="{% url 'dataset_row_create' dataset.id %}">
                                <i class="material-icons">add</i>
                            </a>
                        </div>
                    </h3>
                </div>
                <div id="collapse3" class="collapse" data-parent="#panel-group">
                    <div class="panel-body">
                        <table class="table table-hover">
                            <thead>
                            <tr>
                                <th>Participant</th>
                                <th>DIGS</th>
                                <th>FIGS</th>
                                <th>Narrative</th>
                                <th>Records</th>
                                <th>Consensus</th>
                                <th>LDPS</th>
                                <th>Notes</th>
                                <th>Actions</th>
                            </tr>
                            </thead>
                            <tbody>
                            {% for p in dataset.dataset_participants.all %}
                                <tr>
                                    <td>{{ p.participant.getFullNumber }}</td>
                                    <td>{{ p.get_digs_display }}</td>
                                    <td>{{ p.get_figs_display }}</td>
                                    <td>{{ p.get_narrative_display }}</td>
                                    <td>{{ p.get_records_display }}</td>
                                    <td>{{ p.get_consensus_display }}</td>
                                    <td>{{ p.get_ldps_display }}</td>
                                    <td>{{ p.notes }}</td>
                                    <td><a class="btn-floating green" title="Edit dataset participant"
                                           href="{% url 'dataset_participant_update' p.id %}">
                                        <i class="material-icons">edit</i>
                                    </a></td>
                                </tr>
                            {% endfor %}
                            </tbody>
                        </table>
                    </div>
                    <div class="panel-footer"></div>
                </div>
            </div>
        </div>

    </div>

{% endblock %}